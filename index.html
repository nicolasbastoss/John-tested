<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>john</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --bg:#f6f6f6;
  --paper:#ffffff;
  --text:#111;
  --muted:#666;
  --line:rgba(0,0,0,.08);
}

[data-theme="dark"]{
  --bg:#0e0e0e;
  --paper:#161616;
  --text:#f2f2f2;
  --muted:#aaa;
  --line:rgba(255,255,255,.12);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:'Cormorant',serif;
  background:var(--bg);
  color:var(--text);
}

/* SPLASH */
.splash{
  position:fixed;
  inset:0;
  background:var(--bg);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:50;
  animation:fadeOut 2.8s ease forwards;
}
.splash h1{
  font-size:64px;
  letter-spacing:6px;
  text-transform:uppercase;
  opacity:0;
  animation:fadeIn 1.4s ease forwards;
}
@keyframes fadeIn{to{opacity:1}}
@keyframes fadeOut{
  0%,70%{opacity:1}
  100%{opacity:0;pointer-events:none}
}

/* HEADER */
header{
  position:sticky;
  top:0;
  z-index:20;
  background:linear-gradient(var(--bg),transparent);
}
.reader-mode article {
  max-width: 640px;
  margin: auto;
  font-size: 1.15rem;
  line-height: 1.7;
}


.header-inner{
  max-width:720px;
  margin:auto;
  padding:14px 18px;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}

.brand{
  font-size:20px;
  letter-spacing:4px;
  text-transform:uppercase;
  font-weight:600;
}

.header-actions{
  position:absolute;
  right:18px;
  display:flex;
  gap:14px;
}

.icon-btn{
  background:none;
  border:none;
  cursor:pointer;
}

.icon{
  width:18px;
  height:18px;
  stroke:var(--text);
  stroke-width:1.6;
  fill:none;
}

/* PANELS */
.panel{
  position:fixed;
  top:64px;
  right:18px;
  width:220px;
  background:var(--paper);
  border:1px solid var(--line);
  border-radius:14px;
  padding:14px;
  box-shadow:0 20px 40px rgba(0,0,0,.2);
  opacity:0;
  pointer-events:none;
  transform:translateY(-6px);
  transition:.25s ease;
  z-index:25;
}
.panel.show{
  opacity:1;
  pointer-events:auto;
  transform:translateY(0);
}
.panel button{
  width:100%;
  background:none;
  border:none;
  padding:10px 0;
  text-align:left;
  font-family:inherit;
  font-size:15px;
  cursor:pointer;
  color:var(--text);
}

/* SEARCH */
.search{
  max-width:720px;
  margin:28px auto 40px;
  padding:0 18px;
}
.search input{
  width:100%;
  border:none;
  border-bottom:1px solid var(--line);
  background:none;
  padding:10px 0;
  font-size:16px;
  font-family:inherit;
  outline:none;
}

/* ARTICLES */
main{
  max-width:720px;
  margin:auto;
  padding:0 18px 100px;
}
.article{
  margin-bottom:56px;
  position:relative;
  cursor:pointer;
}
.article img{
  width:100%;
  display:block;
  margin-bottom:16px;
}
.meta{
  font-size:13px;
  color:var(--muted);
}
.title{
  font-size:30px;
  margin:6px 0 12px;
}
.excerpt{
  font-size:18px;
  line-height:1.65;
}

/* SAVE */
.star{
  position:absolute;
  top:8px;
  right:8px;
  font-size:18px;
  opacity:.6;
}
.star.saved{opacity:1}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:var(--paper);
  opacity:0;
  pointer-events:none;
  transition:.35s ease;
  z-index:40;
}
.modal.show{
  opacity:1;
  pointer-events:auto;
}
.modal-inner{
  max-width:720px;
  margin:auto;
  padding:90px 18px 120px;
}
.modal h1{
  font-size:40px;
  margin-bottom:20px;
}
.modal p{
  font-size:20px;
  line-height:1.75;
}

/* CLOSE */
.close{
  position:fixed;
  top:18px;
  left:18px;
  background:none;
  border:none;
  font-size:26px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="splash"><h1>john</h1></div>

<header>
  <div class="header-inner">
    <div class="brand">john</div>
    <div class="header-actions">
      <button class="icon-btn" onclick="toggleAccount()">
        <svg class="icon" viewBox="0 0 24 24">
          <circle cx="12" cy="8" r="4"/>
          <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
        </svg>
      </button>
      <button class="icon-btn" onclick="toggleSettings()">
        <svg class="icon" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a7.8 7.8 0 0 0 0-6l2-1.2-2-3.5-2.3.7a7.5 7.5 0 0 0-1.7-1L13 2h-2l-.5 2.9a7.5 7.5 0 0 0-1.7 1l-2.3-.7-2 3.5 2 1.2a7.8 7.8 0 0 0 0 6l-2 1.2 2 3.5 2.3-.7a7.5 7.5 0 0 0 1.7 1L11 22h2l.5-2.9a7.5 7.5 0 0 0 1.7-1l2.3.7 2-3.5-2-1.2z"/>
        </svg>
      </button>
    </div>
  </div>
</header>

<div class="panel" id="accountPanel">
  <button id="readerBtn" style="font-size:14px;margin-bottom:10px;width:100%;text-align:left;background:none;border:none;cursor:pointer;">
  Reader Mode | <span id="readerStatus">OFF</span>
  </button>
  <button onclick="openSavedArticles()">Saved articles</button>
  <button onclick="signOut()">Sign out</button>
</div>

<div class="panel" id="settingsPanel">
  <button onclick="toggleTheme()">Light / Dark</button>
</div>

<div class="search">
  <input placeholder="Search articles…" oninput="filterArticles(this.value)">
</div>

<main id="articles"></main>

<div class="modal" id="modal">
  <button class="close" onclick="closeModal()">✕</button>
  <div class="modal-inner">
    <h1 id="modalTitle"></h1>
    <p id="modalText"></p>
  </div>
</div>

<script>
/* -------------------------
   STATE
-------------------------- */
const SAVED_KEY = 'savedArticles';
const READER_KEY = 'readerMode';

let savedArticles = JSON.parse(localStorage.getItem(SAVED_KEY) || '[]');
let readerMode = localStorage.getItem(READER_KEY) === 'true';
let showingSaved = false; // controla se estamos mostrando os salvos

/* -------------------------
   SAMPLE ARTICLES
-------------------------- */
const data = [
  {
    id: '1',
    title: 'On Silence',
    excerpt: 'Silence is not empty. It is full of answers.',
    body: 'Silence is not empty. It is full of answers. In a world built on noise, silence becomes resistance.',
    img: 'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee'
  },
  {
    id: '2',
    title: 'The Weight of Morning',
    excerpt: 'Morning is not light. It is responsibility.',
    body: 'Morning carries weight. It demands intention before momentum takes over.',
    img: 'https://images.unsplash.com/photo-1501785888041-af3ef285b470'
  }
];

/* -------------------------
   INIT
-------------------------- */
document.addEventListener('DOMContentLoaded', () => {
  renderArticles();
  applyReaderMode();

  const status = document.getElementById('readerStatus');
  if (status) status.textContent = readerMode ? 'ON' : 'OFF';

  const btn = document.getElementById('readerBtn');
  if (btn) btn.addEventListener('click', () => {
    toggleReaderMode();
    if (status) status.textContent = readerMode ? 'ON' : 'OFF';
  });
});

/* -------------------------
   HEADER PANELS
-------------------------- */
function toggleAccount(){
  closeSettings();
  document.getElementById('accountPanel').classList.toggle('show');
}
function toggleSettings(){
  closeAccount();
  document.getElementById('settingsPanel').classList.toggle('show');
}
function closeAccount(){ document.getElementById('accountPanel').classList.remove('show'); }
function closeSettings(){ document.getElementById('settingsPanel').classList.remove('show'); }

/* -------------------------
   THEME
-------------------------- */
function toggleTheme(){
  const html = document.documentElement;
  html.dataset.theme = html.dataset.theme === 'dark' ? 'light' : 'dark';
}

/* -------------------------
   READER MODE
-------------------------- */
function toggleReaderMode(){
  readerMode = !readerMode;
  localStorage.setItem(READER_KEY, readerMode);
  applyReaderMode();
}
function applyReaderMode(){
  document.body.classList.toggle('reader-mode', readerMode);
}

/* -------------------------
   ARTICLES
-------------------------- */
function renderArticles(){
  const container = document.getElementById('articles');
  container.innerHTML = '';
  data.forEach(a => {
    const saved = savedArticles.includes(a.id);
    container.innerHTML += `
      <article class="article" onclick="openModal('${a.id}')">
        <span class="star ${saved ? 'saved':''}" onclick="toggleSave(event,'${a.id}')">★</span>
        <img src="${a.img}">
        <div class="meta">Essay</div>
        <div class="title">${a.title}</div>
        <div class="excerpt">${a.excerpt}</div>
      </article>
    `;
  });
}

/* -------------------------
   SAVE
-------------------------- */
function toggleSave(e,id){
  e.stopPropagation();
  if(savedArticles.includes(id)){
    savedArticles = savedArticles.filter(x=>x!==id);
  } else {
    savedArticles.push(id);
  }
  localStorage.setItem(SAVED_KEY, JSON.stringify(savedArticles));
  renderArticles();
}

/* -------------------------
   SAVED ARTICLES TOGGLE
-------------------------- */
function openSavedArticles() {
  const container = document.getElementById('articles');

  if(showingSaved){
    renderArticles();
    showingSaved = false;
  } else {
    const saved = data.filter(a => savedArticles.includes(a.id));
    container.innerHTML = '';
    if(saved.length === 0){
      container.innerHTML = '<p style="color:var(--muted)">No saved articles yet.</p>';
    } else {
      saved.forEach(a => {
        const isSaved = savedArticles.includes(a.id);
        container.innerHTML += `
          <article class="article" onclick="openModal('${a.id}')">
            <span class="star ${isSaved ? 'saved':''}" onclick="toggleSave(event,'${a.id}')">★</span>
            <img src="${a.img}">
            <div class="meta">Essay</div>
            <div class="title">${a.title}</div>
            <div class="excerpt">${a.excerpt}</div>
          </article>
        `;
      });
    }
    showingSaved = true;
  }

  closeAccount();
}

/* -------------------------
   MODAL
-------------------------- */
function openModal(id){
  const a = data.find(x=>x.id===id);
  document.getElementById('modalTitle').textContent = a.title;
  document.getElementById('modalText').textContent = a.body;
  document.getElementById('modal').classList.add('show');
}
function closeModal(){ document.getElementById('modal').classList.remove('show'); }

/* -------------------------
   SEARCH
-------------------------- */
function filterArticles(q){
  q = q.toLowerCase();
  document.querySelectorAll('.article').forEach(a=>{
    a.style.display = a.innerText.toLowerCase().includes(q) ? '' : 'none';
  });
}
</script>




</body>
</html>

